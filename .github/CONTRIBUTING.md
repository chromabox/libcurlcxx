# Contribution Guide

## この文章は何？

まず、libcurlcxxへの貢献をご検討いただきありがとうございます。
この文章はlibcurlcxxへのコントリビュート方法についてのガイドです  
  
Issueを建てる、プルリクを送る…その前に深呼吸してまずはこの文章を一読お願いします。  
  
## そもそもコントリビュートって何？どうしたらいいの？？

最初のコントリビュートは緊張しますよね、私もそうでした。  
まずはこの「オープンソースガイド」一読することをおすすめします。  
とても良いことが日本語(またはあなたの母国語)でたくさん書いてあります。  
https://opensource.guide/ja/how-to-contribute/


## Issue について

ライブラリをリンクしたことによる問題発生については、動作環境を出来る限り詳しく書いてください。  
その次にどのような使用をしたか…などのできるだけ詳しい情報を添えてください。  
使用環境などなどをできるだけ詳しく書いていただけると、アドバイスがしやすく回答が得られやすいです。  
  
エラーと調査の結果によっては、元のcurlライブラリに原因となることもあるかもしれません。  
そのような場合は、お手数ですが直接大元のcurlにIssueを建ててみてください。  
  
また、その他どのようなIssueも歓迎しておりますが、即時回答は出来かねますので長い目でみてください。  
Issueを建てると回答がついているか毎日見てしまいがちですが、すみませんぐっとこらえてください。  
  
また回答の催促は**絶対に**してはいけません。(最悪の場合はIssueを閉じさせていただきます)  

## Pull Request について

Pull Request（プルリク）ありがとうございます。大歓迎です。  
大前提として、**devブランチからの差分で**作成お願いします。  
よろしくおねがいします。  

### 受け付けるPull Request

次の種類のプルリクは受け付けられやすいです。  
優先度高めで出来る限りマージを行います。  
- windowsの対応コード(求む)
- よりエレガントなmodern c++なコードへの改良
- 誤字脱字、typo
- わかりやすいコメントの追加
- わかりやすいサンプル(Test)の追加
- 他のプロジェクトからコードを持ってきた場合はMITライセンスであるコード(ネタ元への謝辞は追加必須)  

修正や改善の疑問点がある場合は、Issueを建てて相談をお願いします。  
そのプルリクによって依存しそうな外部ライブラリが増えそうな場合は、Issueを建ててまずは相談お願いします。  

### 受け付けるのが難しいPull Request

次のようなものは受け付けられにくいです。
- masterブランチから作成されたもの(自動的に却下です。devブランチの差分から作成してください)
- あまりにmodern c++の姿勢とは異なるコード
- 「コーディングスタイルガイドライン」に著しく従っていないコード
- ビルド(後述)に通らないコード  
- linter(後述)に通らないコード  
- クラス名、ファイルの位置が適切ではないコード
- LICENSEを換えること(このプロジェクトはMITライセンスのみです)
- LICENSEが怪しいコードを持ってきて、そのままコピペする行為
- その他一般常識に反すること

### コミットメッセージについて

特に決まりはありませんが、簡単でも良いのでなにかしら要約を書いてください。  
日本語でも英語でも大丈夫です。  
  
良いコミットメッセージが思い浮かばない場合はChatGPTにお伺いするというのも手です。  

### 修正の送り方

誤字脱字程度ならIssueを建てずに直接Github上で編集してプルリクを送って頂いて構いません。  
ソースコードの改変などで、ローカルで編集して送りたい場合は次のようにします。  

1. 現状の**devブランチ**をgithub上でforkする
2. 変更用にbranchを作る
3. コードの変更を施す
4. CMakeのビルドにパスするか確認する
5. linterのチェックにパスするか確認する
6. ローカルのgitにコミットする
7. ブランチをgithubにpushする
8. githubを操作して、pull request を送る(devブランチとの差分かどうかを再確認しましょう)

### ビルドとlinterチェックについて

プルリクを送ると直ちにビルドとlinter(cpplint)によるチェックが始まります。  
これらにPassしないとプルリクの承諾は出来かねます。ご注意願います。  
もし引っかかった場合は、まず何回か修正してテストにPassしてください。  
linterをローカルで動かす場合は以下のようにします。
```
$ ./exec_linter.sh
```
もしくは、`vscode`を使用している場合は、`ビルドタスクの実行-code check`でチェックが可能です。  
このときは「問題」タブに問題行が出てくるので探しやすいと思います。    


## コーディングスタイルガイドライン

プルリクエストで送られるコードに関して一定のルールを設けています  
一読お願いします  

### コーディングルールについて

gccのコンパイルオプションに`-Wall,-Werror`が含まれていますので、コンパイラから出たWarningは取りきってください。  
また、スタイルのチェックとしてcpplintに通る必要があります。  
一部無効(タブとスペースなど)にしていますが、ライブラリ本体はちょっと厳し目になっています。  
cpplintのルール関連についてはここが参考になります。  
https://ryokrm-m.com/tech/cpplint%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%AB%E4%B8%80%E8%A6%A7/

インデントがタブかスペースかなどについては特に決めていませんが、参考として私は次のようなルールに従っています。
- TABでインデントを行っています
- TABのスペース数は4です

カッコ({}など)の初め方についてはcpplintさえ通るような書き方であればOKです。  

### クラス、ファイルの命名規則について

`src`や`include`に属するファイルのファイル名は「curlcxx_◎◎.cpp」のように接頭語`curlcxx_`を追加してください。  
クラス名とソースファイル格納位置については以下の取り決めがあります  
- 基本的なクラスについては`curl_base_XXX`とし、`src/base`、`include/base`に格納します。
- `curl_base`を純粋に派生したクラスについては`curl_XXX`とし、`src/ext`、`include/ext`に格納します。
- テスト、サンプルについては`test`に格納してください。テストやサンプルのクラス名などの決まりはありません。ファイル名は何のサンプルかわかりやすい名前を付けてください。  

### その他

自分でも出来ているかどうか怪しいところがありますが、一応「modern c++」を標榜しておりますので、できるだけ「modern c++」に則ったコードをお願いします。  
ここで言う「modern c++」とはおおよそc++17辺りのコードのことを指しています。  
サンプル、テストコードについては甘めですが、ライブラリ本体については厳し目に行きます。  
  
コメントが日本語か英語かについては特に決めていません。どちらでも構いません。  
  
もし追加されるコードについての参照元がある場合は、ライセンスを確認した上で問題なさそうであれば軽くでいいので謝辞をお願いします(READMEの謝辞、参考元:の項目に追記で良いです)。  
ネタ元へのリスペクト、感謝するというその思いが明日のOSSを良くします。  

## 最後に

ここまで読んでいただきありがとうございました   
ややこしいことを書きましたが、読んでいただき感謝です  
あなたのコントリビュートをお待ちしております  